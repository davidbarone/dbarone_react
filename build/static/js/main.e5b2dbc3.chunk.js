(this.webpackJsonpdbarone=this.webpackJsonpdbarone||[]).push([[0],{34:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5),C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),moment__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(16),moment__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__),marked__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(24),marked__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(marked__WEBPACK_IMPORTED_MODULE_9__),_PostRelations__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(35),ViewPost=function(_React$Component){function ViewPost(e){var t;return Object(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,ViewPost),(t=Object(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__.a)(this,Object(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(ViewPost).call(this,e))).handleEditPost=function(e){t.props.setMode("EDIT")},t.state={loaded:!1},t}return Object(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(ViewPost,_React$Component),Object(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(ViewPost,[{key:"loadScriptSync",value:function(e){return new Promise((function(t,a){e.onload=function(){t({script:e})},document.head.appendChild(e)}))}},{key:"componentDidMount",value:function(){var _componentDidMount=Object(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _callee(){var style,head,div,i,child,s,code,script;return C_DBARONE_dbarone_node_src_dbarone_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.props.post||this.state.loaded){_context.next=25;break}if(this.props.post.style&&(style=document.createElement("style"),style.innerText=this.props.post.style,document.head.appendChild(style)),!this.props.post.head){_context.next=23;break}head=this.props.post.head.replace(/https:\/\/api.dbarone.com/g,"https://api.dbarone.com"),div=document.createElement("div"),div.innerHTML=head,i=0;case 7:if(!(i<div.childNodes.length)){_context.next=22;break}if(child=div.childNodes[i],!child||"SCRIPT"!==child.nodeName||""===child.src){_context.next=18;break}return s=document.createElement("script"),s.type="text/javascript",s.src=child.src,s.async=!1,_context.next=16,this.loadScriptSync(s);case 16:_context.next=19;break;case 18:eval(child.innerHTML);case 19:i++,_context.next=7;break;case 22:div.childNodes.forEach((function(e){}));case 23:if(this.props.post.code){code=this.props.post.code.replace(/https:\/\/api.dbarone.com/g,"https://api.dbarone.com"),script=document.createElement("script"),script.type="text/javascript",script.async=!1;try{script.appendChild(document.createTextNode(code)),document.head.appendChild(script)}catch(e){script.text=code,document.head.appendChild(script)}}this.setState({loaded:!0});case 25:case"end":return _context.stop()}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"content",value:function(){if(this.props.post.content)return"MARKDOWN"===this.props.post.post_type?marked__WEBPACK_IMPORTED_MODULE_9___default()(this.props.post.content).replace(/https:\/\/api.dbarone.com/g,"https://api.dbarone.com"):this.props.post.content.replace(/https:\/\/api.dbarone.com/g,"https://api.dbarone.com")}},{key:"navigation",value:function(e){return e.hasRelations?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"navbar"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_PostRelations__WEBPACK_IMPORTED_MODULE_10__.a,{relations:e})):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null)}},{key:"post",value:function(e){var t=this;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{padding:"0% 10%"},ref:function(e){return t.div=e}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h1",null,e.title),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{color:"#999",fontSize:"0.8em"}},"By ",e.updated_by," on ",moment__WEBPACK_IMPORTED_MODULE_8___default()(e.published_dt).format("LL"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button",{className:"button",onClick:this.handleEditPost},"Edit"))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{marginTop:"6px"},dangerouslySetInnerHTML:{__html:this.content()}}))}},{key:"render",value:function(){var e=this.props,t=e.post,a=e.relations;e.setMode;return this.componentDidMount(),t&&a?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"row"}},this.navigation(a),this.post(t)):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null)}}]),ViewPost}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);__webpack_exports__.a=ViewPost},35:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.relations;return t&&t.hasRelations?r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{style:{margin:"0em 1em"}},t.parent&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Parent"),r.a.createElement("a",{href:"/posts/".concat(t.parent.id)},t.parent.title)),Array.isArray(t.siblings)&&!!t.siblings.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Siblings"),t.siblings.map((function(e,t){return r.a.createElement("a",{key:e.id,href:"/posts/".concat(e.id)},e.title)}))),Array.isArray(t.children)&&!!t.children.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Children"),t.children.map((function(e,t){return r.a.createElement("a",{key:e.id,href:"/posts/".concat(e.id)},e.title)}))))):r.a.createElement("div",null)}},38:function(e,t,a){e.exports=a(57)},43:function(e,t,a){},44:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},45:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),l=a.n(o),c=(a(43),a(44),a(45),a(2)),i=a.n(c),s=a(9),u=a(14),_=a(16),d=a.n(_),m=a(24),p=a.n(m),h=function(e){var t=e.id,a=Object(n.useState)(null),o=Object(u.a)(a,2),l=o[0],c=o[1],_=Object(n.useState)(!1),m=Object(u.a)(_,2);m[0],m[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.dbarone.com","/posts/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),l?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,r.a.createElement("a",{href:"/posts/"+l.id},l.title)),r.a.createElement("div",{style:{color:"#999",fontSize:"0.8em"}},"By ",l.updated_by," on ",d()(l.published_dt).format("LL")),r.a.createElement("div",{style:{marginTop:"6px"},dangerouslySetInnerHTML:{__html:function(e){if(e.teaser)return p()(e.teaser).replace(/https:\/\/api.dbarone.com/g,"https://api.dbarone.com")}(l)}}),r.a.createElement("hr",null)):r.a.createElement("div",null)},E=a(26),b=a.n(E),f=localStorage.setItem;localStorage.setItem=function(e,t){f.apply(this,arguments);var a=new Event("localStorageChanged");a.value=t,a.key=e,window.dispatchEvent(a)};var O=localStorage.removeItem;function v(){return localStorage.getItem("token")}function g(e){localStorage.setItem("token",e)}function y(){var e=v();return e&&b()(e)}function D(){return(D=Object(s.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={email:t,password:a},fetch("".concat("https://api.dbarone.com","/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){g(e.headers.get("x-access-token"))})).catch((function(e){throw new Error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}localStorage.removeItem=function(e){O.apply(this,arguments);var t=new Event("localStorageChanged");t.key=e,window.dispatchEvent(t)};var C={login:function(e,t){return D.apply(this,arguments)},logout:function(){localStorage.removeItem("token")},getUser:y,getUserRole:function(){var e=y();return e&&e.role},getToken:v,loggedIn:function(){var e=v();return!!e&&!function(e){try{return b()(e).exp<Date.now()/1e3}catch(t){return!1}}(e)}},P=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(!1),_=Object(u.a)(c,2),d=(_[0],_[1]);function m(){return(m=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.dbarone.com","/posts"),{method:"GET",headers:{Authorization:"Bearer ".concat(C.getToken())}});case 2:t=e.sent,console.log(t),t.json().then((function(e){return l(e)})).catch((function(e){return d(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Posts"),o.map((function(e){return r.a.createElement(h,{key:e.id,id:e.id})})))},w=a(17),k=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{style:{padding:"80px 0px"}},r.a.createElement("div",{style:{margin:"auto",width:"1024px",fontSize:"x-large"}},r.a.createElement("blockquote",{cite:"https://www.dbarone.com/"},r.a.createElement("p",null,"Ordinary people always ask me 'How have you made the Business Intelligence community a better place?'. I tell them 'I'm good with colors. I use a lot of them in my charts. Accountants seem to like me because I compliment them on their Excel skills. I love working with complex organisations because German ERP software brings the best out in me. If you talk about Big Data, I'll smile at you like I pretend to know what you're talking about, but above all, I've put the humanity (and sexuality) back into BI."),r.a.createElement("cite",null,r.a.createElement("a",{href:"https://www.dbarone.com"},"David Barone")))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("a",{title:"Linkedin",href:"https://www.linkedin.com/in/david-barone-083aa05b/"},r.a.createElement(w.a,{style:{fontSize:40,margin:"10px"},icon:["fab","linkedin"]})),r.a.createElement("a",{title:"Github",href:"https://github.com/davidbarone"},r.a.createElement(w.a,{style:{fontSize:40,margin:"10px"},icon:["fab","github"]})),r.a.createElement("a",{title:"Mail",href:"mailto:davidbarone@live.com"},r.a.createElement(w.a,{style:{fontSize:40,margin:"10px"},icon:"envelope-square"})))))},M=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Search"),"There's currently nothing to do here...")},R=a(3),j=a(4),T=a(6),x=a(5),S=a(7),A=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(T.a)(this,Object(x.a)(t).call(this,e))).getPostObject=function(){return{id:a.id,title:a.titleField.current.value,teaser:a.teaserField.current.value,content:a.contentField.current.value,post_type:a.postTypeField.current.value,head:a.headField.current.value,code:a.codeField.current.value,style:a.styleField.current.value,parent_id:parseInt(a.parentIdField.current.value)||void 0,published_dt:new Date(a.publishedDtField.current.value)||d()(),deleted:!1}},a.handleCancelEdit=function(e){a.props.setMode("VIEW")},a.handleSave=function(e){var t=a.getPostObject();a.props.onSave(t,e),e.preventDefault()},a.id=e.post.id,a.titleField=r.a.createRef(),a.teaserField=r.a.createRef(),a.contentField=r.a.createRef(),a.postTypeField=r.a.createRef(),a.headField=r.a.createRef(),a.codeField=r.a.createRef(),a.styleField=r.a.createRef(),a.parentIdField=r.a.createRef(),a.publishedDtField=r.a.createRef(),a.deletedField=r.a.createRef(),a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props||{},t=e.post,a=(e.onSave,e.onCancel);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Edit Post"),r.a.createElement("form",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Edit / Create Post"),r.a.createElement("button",{class:"button primary",onClick:this.handleSave},"Save"),r.a.createElement("button",{class:"button",onClick:a},"Cancel"),r.a.createElement("label",null,"Title:"),r.a.createElement("input",{className:"full-width",type:"text",ref:this.titleField,defaultValue:t.title}),r.a.createElement("label",null,"Teaser (This section ONLY supports MARKDOWN):"),r.a.createElement("textarea",{className:"full-width",rows:"3",ref:this.teaserField,defaultValue:t.teaser}),r.a.createElement("label",null,"Content (Note no executable code here. Put scripts in head or code):"),r.a.createElement("textarea",{className:"full-width",rows:"20",ref:this.contentField,defaultValue:t.content}),r.a.createElement("label",null,"Post Type:"),r.a.createElement("select",{ref:this.postTypeField,defaultValue:t.post_type},r.a.createElement("option",null,"HTML"),r.a.createElement("option",null,"MARKDOWN")),r.a.createElement("label",null,"Head (Script links to external files and other CSS links etc):"),r.a.createElement("textarea",{className:"full-width",rows:"3",ref:this.headField,defaultValue:t.head}),r.a.createElement("label",null,"Code (Inline JS without the script tag - just the JS code):"),r.a.createElement("textarea",{className:"full-width",rows:"20",ref:this.codeField,defaultValue:t.code,placeholder:"const hello_world = 'hello world!';\r\nalert(hello_world);"}),r.a.createElement("label",null,"Style:"),r.a.createElement("textarea",{className:"full-width",rows:"10",ref:this.styleField,defaultValue:t.style}),r.a.createElement("label",null,"Published Date:"),r.a.createElement("input",{type:"date",ref:this.publishedDtField,defaultValue:new Date(t.published_dt||d()()).toISOString().substr(0,10)}),r.a.createElement("label",null,"Parent ID:"),r.a.createElement("input",{type:"text",ref:this.parentIdField,defaultValue:t.parent_id}),r.a.createElement("label",null,"Deleted:"),r.a.createElement("input",{type:"checkbox",ref:this.deletedField,defaultValue:t.deleted}))))}}]),t}(r.a.Component),I=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(e){a.props.setMode("VIEW")},a.handleSave=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("".concat("https://api.dbarone.com","/posts"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:C.getToken()}});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log(r),window.location="/posts/".concat(r.id);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(A,{post:{},onSave:this.handleSave})}}]),t}(r.a.Component),B=a(15),L=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(T.a)(this,Object(x.a)(t).call(this,e))).downloadFile=function(e){window.location.href="".concat("https://api.dbarone.com","/resources/").concat(e)},a.state={data:null},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"getColumns",value:function(e){return e?Object.keys(e[0]):[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onDeleteResource;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{style:{borderCollapse:"collapse",border:"1px solid #ddd"}},r.a.createElement("thead",null,r.a.createElement("tr",{style:{background:"#252525"}},this.getColumns(a).map((function(e){return r.a.createElement("th",{key:e,style:{padding:"1em 0.5em"}},e)})),r.a.createElement("th",null))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.id},Object.keys(t).map((function(e){return r.a.createElement("td",{key:e,style:{padding:"0.25em 0.5em"}},t[e])})),r.a.createElement("td",null,r.a.createElement("button",{style:{margin:"0px 2px"},title:"delete",href:".",onClick:function(){return n(t.id)}},r.a.createElement(w.a,{style:{fontSize:20},icon:"trash-alt"})),r.a.createElement("button",{style:{margin:"0px 2px"},title:"download",href:".",onClick:function(){return e.downloadFile(t.id)}},r.a.createElement(w.a,{style:{fontSize:20},icon:"download"}))))}))))):r.a.createElement(r.a.Fragment,null)}}]),t}(r.a.Component);var F=function(e){var t=e.onAddResource,a=Object(n.useCallback)((function(e){l.current.innerText=e.target.files[0].name})),o=Object(n.useCallback)(function(){var e=Object(s.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=document.getElementById("file-upload").files[0],(r=new FormData).append("resourceFile",n),t(r),a.preventDefault()}catch(o){console.log(o)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=r.a.createRef();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("h3",null,"Upload File:"),r.a.createElement("label",{htmlFor:"file-upload",className:"button"},"Select file:"),r.a.createElement("input",{id:"file-upload",type:"file",style:{display:"none"},name:"resourceFile",onChange:a}),r.a.createElement("input",{className:"button primary",type:"submit",onClick:o}),r.a.createElement("div",{id:"fileName",ref:l,disabled:!0})))},W=a(37),U=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(T.a)(this,Object(x.a)(t).call(this,e))).getData=function(){fetch("".concat("https://api.dbarone.com","/resources")).then((function(e){return e.json()})).then((function(e){a.setState({data:e})}))},a.deleteResource=function(e){try{fetch("http://localhost:5000/resources/".concat(e),{method:"DELETE",headers:{Authorization:C.getToken()}}).then((function(t){a.setState((function(t){return{data:t.data.filter((function(t){return t.id!==e}))}}))}))}catch(t){}},a.addResource=function(e){try{fetch("http://localhost:5000/resources/upload",{method:"POST",body:e,headers:{Authorization:C.getToken()}}).then((function(e){e.json().then((function(e){a.setState({data:[].concat(Object(W.a)(a.state.data),[e])})}))}))}catch(t){}},a.state={data:null},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{data:this.state.data,onDeleteResource:this.deleteResource}),r.a.createElement(F,{onAddResource:this.addResource}))}}]),t}(r.a.Component),K=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),o=a[0],l=a[1],c="ADD_POST"!==o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button",onClick:function(e){l("ADD_POST")}},"Create"),r.a.createElement("span",null,"Create new post.")),i="ADD_POST"===o&&r.a.createElement(I,null);return"admin"===C.getUserRole()?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Admin"),r.a.createElement("hr",null),r.a.createElement("h2",null,"Posts"),c,i,r.a.createElement("hr",null),r.a.createElement("h2",null,"Resources"),r.a.createElement(U,null),r.a.createElement("hr",null)):r.a.createElement(B.a,{to:"/login"})},N=function(e){return r.a.createElement("div",null,"Signup")},V=a(34),q=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(e){a.props.setMode("VIEW")},a.handleSave=function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C.getToken(),fetch("".concat("https://api.dbarone.com","/posts/").concat(t.id),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:n}}).then((function(e){window.location="/posts/".concat(t.id)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.post;e.setMode;return"admin"===C.getUserRole()?r.a.createElement("div",{style:{padding:"0% 10%"}},r.a.createElement(A,{post:t,onSave:this.handleSave})):r.a.createElement(B.a,{to:"/login"})}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(T.a)(this,Object(x.a)(t).call(this,e))).setMode=function(e){a.setState({mode:e})},a.state={post:null,relations:null,mode:"VIEW"},a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("https://api.dbarone.com","/posts/").concat(this.props.id)).then((function(e){return e.json()})).then((function(t){e.setState({post:t})})),fetch("".concat("https://api.dbarone.com","/posts/").concat(this.props.id,"/relations")).then((function(e){return e.json()})).then((function(t){e.setState({relations:t})}))}},{key:"render",value:function(){this.props.id;var e=null;return"EDIT"===this.state.mode?e=r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{post:this.state.post,setMode:this.setMode})):"VIEW"===this.state.mode&&(e=r.a.createElement(V.a,{post:this.state.post,relations:this.state.relations,setMode:this.setMode})),e}}]),t}(r.a.Component),H=a(36),J=a(23),G=function(e){function t(e){var a;return Object(R.a)(this,t),a=Object(T.a)(this,Object(x.a)(t).call(this,e)),C.logout(),a.state={email:"",password:"",submitted:!1,loading:!1,error:""},a.handleChange=a.handleChange.bind(Object(J.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(J.a)(a)),a}return Object(S.a)(t,e),Object(j.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(H.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0});var a=this.state,n=a.email,r=a.password;n&&r&&(this.setState({loading:!0}),C.login(n,r).then((function(e){var a=(t.props.location.state||{from:{pathname:"/"}}).from;t.props.history.push(a)}),(function(e){return t.setState({error:e,loading:!1})})))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.submitted,o=e.loading,l=e.error;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{name:"login",onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),n&&!t&&r.a.createElement("div",null,"Email is required")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),n&&!a&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",null,r.a.createElement("button",{className:"button primary",disabled:o},"Login")),l&&r.a.createElement("div",null,l)))}}]),t}(r.a.Component),$=a(10),Y=function(){return Object(n.useEffect)((function(){return C.logout()})),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Logout"),r.a.createElement("div",null,"You have successfully logged out of this site. Click"," ",r.a.createElement($.b,{to:"/"},"Here")," to go back to the home page."))},Q=function(e){function t(){var e;return Object(R.a)(this,t),(e=Object(T.a)(this,Object(x.a)(t).call(this))).storageHandlerEvent=function(t){e.setState({user:C.getUser()})},e.state={user:C.getUser()},window.addEventListener("localStorageChanged",e.storageHandlerEvent,!1),e}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{fontSize:"Small"}},this.state.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{height:"60px",lineHeight:"60px",float:"left"}},"Welcome ",this.state.user.name,"!"),r.a.createElement($.b,{to:"/logout"},r.a.createElement("button",{style:{border:"none",background:"none"}},"Logout"))),!this.state.user&&r.a.createElement($.b,{to:"/login"},r.a.createElement("button",{style:{border:"none",background:"none"}},"Login")))}}]),t}(r.a.Component),X=function(e){function t(){return Object(R.a)(this,t),Object(T.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),"There's currently nothing to do here...")}}]),t}(r.a.Component),Z=a(22),ee=a(19),te=a(20);Z.b.add(ee.c,ee.a,ee.b,te.b,te.c,te.a);var ae=function(){return r.a.createElement("div",null,r.a.createElement($.b,{to:"/"},r.a.createElement("button",{style:{fontFamily:"'Kalam', cursive",fontSize:"20px",fontWeight:400,border:"none",background:"none"}},"David Barone-BI Developer")),r.a.createElement($.b,{to:"/posts"},r.a.createElement("button",{style:{border:"none",background:"none"}},"Posts")),r.a.createElement($.b,{to:"/search"},r.a.createElement("button",{style:{border:"none",background:"none"}},"Search")),r.a.createElement($.b,{to:"/admin"},r.a.createElement("button",{style:{border:"none",background:"none"}},"Admin")),r.a.createElement($.b,{to:"/signup"},r.a.createElement("button",{style:{border:"none",background:"none"}},"Signup")))};function ne(e){var t=e.match;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{id:t.params.id}))}var re=function(){return r.a.createElement($.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement(ae,null),r.a.createElement("span",{style:{position:"absolute",right:"0px"}},r.a.createElement(Q,null))),r.a.createElement("main",{className:"main"},r.a.createElement(B.b,{path:"/posts/:id",component:ne}),r.a.createElement("div",{style:{padding:"0% 10%"}},r.a.createElement(B.b,{exact:!0,path:"/",component:k}),r.a.createElement(B.b,{exact:!0,path:"/posts",component:P}),r.a.createElement(B.b,{exact:!0,path:"/search",component:M}),r.a.createElement(B.b,{exact:!0,path:"/account",component:N}),r.a.createElement(B.b,{exact:!0,path:"/admin",component:K}),r.a.createElement(B.b,{exact:!0,path:"/login",component:G}),r.a.createElement(B.b,{exact:!0,path:"/logout",component:Y}),r.a.createElement(B.b,{exact:!0,path:"/signup",component:X}))),r.a.createElement("footer",null,r.a.createElement("div",null,"Copyright (c) David Barone 2019"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.e5b2dbc3.chunk.js.map